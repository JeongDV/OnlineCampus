<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>강의보기 페이지</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css">
    <!--<link rel="stylesheet" href="../../static/css/course.css">-->
</head>
<body>
<div class="container">
    <h3>강의보기</h3>
    <div class="accordion accordion-flush" id="accordionExample">
        <div>
            <table class="table">
                <tr style="text-align: center;">
                    <th style="width: 25%">강의명</th>
                    <th style="width: 25%">강의운영기간</th>
                    <th style="width: 25%">진도율</th>
                    <th style="width: 25%">강의현황보기</th>
                </tr>
            </table>
        </div>
        <div class="w-100 accordion-item" th:each="course : ${courseList}">
            <table class="table accordion-header" th:id="'heading' + ${course.courseSeq}">
                <tr class="collapsed" data-bs-toggle="collapse" th:data-bs-target="'#collapse' + ${course.courseSeq}" th:aria-expanded="false" th:aria-controls="'collapse' + ${course.courseSeq}"  style="text-align: center;">
                    <td th:text="${course.courseName}" style="width: 25%"></td>
                    <td th:text="${course.startDateTime}+'~'+${course.endDateTime}" style="width: 25%"></td>
                    <td th:text="00" style="width: 25%"></td>
                    <td  style="width: 25%">
                        <button type="button">보기</button>
                    </td>
                </tr>
            </table>
            <div th:id="'collapse' + ${course.courseSeq}" class="accordion-collapse collapse accordion-body" th:aria-labelledby="'heading' + ${course.courseSeq}" th:data-bs-parent="'#accordionExample'" style="padding: 0;">
                <div style="padding: 20px;">
                    <span class="allProgress">전체 진도율</span>
                    <div class="progress">
                        <div class="progress-bar" role="progressbar" style="width: 75%;" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100">75%</div>
                    </div>
                </div>
                <table class="table" th:each="chapter : ${courseChapterList}">
                    <tr style="text-align: left;">
                        <th colspan="5" th:text="${chapter.chapterSeq + '차시'}"></th>
                        <td>
                            <!-- 각 챕터에 대한 정보 표시 -->
                            <span th:text="${chapter.chapterName}"></span>
                        </td>
                        <td>
                            <button type="button" class="startCourse float-right" onclick="startCourse()">강의보기</button>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2" rowspan="2" style="padding: 30px 10px;">
                            <img src="../../static/img/example.png" width="100%" height="80px">
                        </td>
                        <th th:text="'차시번호 : ' + ${chapter.chapterSeq}"></th>
                        <td>진도율 : 75%</td>
                        <th>학습시간 : 0시 0분 0초</th>
                        <td>진도율 : 75%</td>
                    </tr>
                    <tr>
                        <th>학습시간 : 0시 0분 0초</th>
                        <td>진도율 : 75%</td>
                        <th>학습시간 : 0시 0분 0초</th>
                        <td>진도율 : 75%</td>
                    </tr>
                </table>
                <div>
                    <table class="table">
                        <tr>
                            <th>1차시</th>
                            <td>
                                <img src="../../static/img/example.png" width="80px" height="50px">
                            </td>
                            <th>학습시간</th>
                            <td>0시 0분 0초</td>
                            <th>진도율</th>
                            <td>0%</td>
                            <td>
                                <button type="button" class="startCourse" onclick="openModalAndPlayYoutube()">강의보기</button>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 강의 모달창 -->
<div id="courseModal" class="modal" style="display: none; margin-top: 80px;">
    <div class="modal-dialog">
        <div class="modal-content" style="width: 950px; height: 700px; position: relative; left: -45%; border: none;">
            <div class="modal-header">
                <h5 class="modal-title" style="font-weight: bold;">강의 차수명</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div id="youtubePlayer"></div>
                <iframe id="ytplayer" type="text/html" width="920" height="605"
                        src="https://www.youtube.com/watch?v=AgtBj7XVToQ"
                        frameborder="0" allowfullscreen></iframe>
            </div>
        </div>
    </div>
</div>

</body>
<!-- jQuery 라이브러리 -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js"></script>
<script>
    // 모달 열기 및 유튜브 영상 재생 함수
    function openModalAndPlayYoutube() {
        // 모달 열기
        $('#courseModal').modal('show');
    }

    document.querySelector('#courseModal .close').addEventListener('click', function () {
        $('#courseModal').modal('hide');
    });

</script>
<script src="https://www.youtube.com/iframe_api"></script>
</html>