<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>강의 관리 페이지</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" type="text/css" href="../../css/manager_main.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<!-- 모달 스타일 -->
<style>
    .modal-overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.4);
        z-index: 9999;
    }

    .modal-content {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background-color: white;
        padding: 20px;
        width: 80%;
        height: 70%;
        max-width: 90%; /* 최대 가로 크기 설정 */
        box-shadow: 0px 5px 15px rgba(0, 0, 0, 0.3);
        border-radius: 5px;
    }

    .close-button1 {
        position: absolute;
        top: 10px;
        right: 15px;
        font-size: 24px;
        cursor: pointer;
    }
</style>
<body>
<!-- 헤더 -->
<div class="header" style="background-color: #333; color: white; padding: 20px 0;"><h2 style="margin: 0 0 0 15px; font-size: 32px; display: flex; align-items: center;">
        중앙정보처리학원
        <small style="margin-left: auto; font-size: 16px; margin-right: 30px;"
               th:text="${loggedInMember.nameKor} + ' 님 '"></small><a href="/Member_logout"
                                                                      style="color: whitesmoke; font-size: 10px; margin-right: 10px;">
        로그아웃</a>
    </h2></div>

<!-- 메뉴 -->
<div class="sidebar">
    <div style="margin-bottom: 20px; display: flex; align-items: center;">
        <input type="search" id="searchInput" placeholder="검색어를 입력하세요">
        <button id="searchButton"><i class="fas fa-search" style="color: #555; font-size: 18px;"></i></button>
    </div>
    <hr style="border-color: #ddd;">
    <div>
        <h4 style="font-size: 25px; font-weight: bold; margin-bottom: 10px;">메뉴</h4>
        <ul class="sidebar-list">
            <li class="menu-link" data-target="online-course"><a href="#">온라인 강의 관리</a></li>
            <li class="menu-link" data-target="content-management"><a href="#">강의 컨텐트 관리</a></li>
            <li class="menu-link" data-target="member-management"><a href="#">회원 관리</a></li>
        </ul>
    </div>
</div>

<!-- 해당 메뉴 내용 컨테이너 -->
<div class="container" style="position: relative;">

    <!-- 메뉴 박스 div -->
    <div style="display: flex;">
        <!-- 온라인강의 박스 -->
        <div id="online-course-box" class="content-box" data-target="online-course">
            온라인강의관리
            <button class="close-button" data-target="online-course">x</button>
        </div>
        <!-- 강의 컨텐트 관리 박스 -->
        <div id="content-management-box" class="content-box" data-target="content-management">
            강의컨탠트관리
            <button class="close-button" data-target="content-management">x</button>
        </div>
        <!-- 회원관리 박스 -->
        <div id="member-management-box" class="content-box" data-target="member-management">
            회원관리
            <button class="close-button" data-target="member-management">x</button>
        </div>
    </div>

    <!-- 네이베게이션 스크립트 -->
    <script>
        const menuLinks = document.querySelectorAll(".menu-link");
        const contentBoxes = document.querySelectorAll(".content-box");
        const closeButton = document.querySelectorAll(".close-button");

        menuLinks.forEach(link => {
            link.addEventListener("click", function (event) {
                event.preventDefault();
                const target = link.getAttribute("data-target");
                contentBoxes.forEach(box => {
                    if (box.id === target + "-box") {
                        box.parentElement.appendChild(box);
                        box.classList.add("show");
                        box.classList.add("show1");
                    } else {
                        box.classList.remove("show");
                    }
                });
                if (target === "online-course") {
                    document.getElementById("online-course").style.display = "block";
                } else {
                    document.getElementById("online-course").style.display = "none";
                }
                if (target === "content-management") {
                    document.getElementById("content-management").style.display = "block";
                } else {
                    document.getElementById("content-management").style.display = "none";
                }
                if (target === "member-management") {
                    document.getElementById("member-management").style.display = "block";
                } else {
                    document.getElementById("member-management").style.display = "none";
                }
            });
        });

        contentBoxes.forEach(box => {
            box.addEventListener("click", function () {
                const target = box.getAttribute("data-target");
                contentBoxes.forEach(otherBox => {
                    if (otherBox === box) {
                        box.classList.add("show");
                        box.classList.add("show1");
                    } else {
                        otherBox.classList.remove("show");
                    }
                });
                if (target === "online-course") {
                    document.getElementById("online-course").style.display = "block";
                } else {
                    document.getElementById("online-course").style.display = "none";
                }
                if (target === "content-management") {
                    document.getElementById("content-management").style.display = "block";
                } else {
                    document.getElementById("content-management").style.display = "none";
                }
                if (target === "member-management") {
                    document.getElementById("member-management").style.display = "block";
                } else {
                    document.getElementById("member-management").style.display = "none";
                }
            });
        });

        document.addEventListener("DOMContentLoaded", function() {
            const closeButton = document.querySelectorAll(".close-button");
            closeButton.forEach(button => {
                button.addEventListener("click", function (event) {
                    const target = button.getAttribute("data-target");
                    event.stopPropagation(); // 이벤트 버블링 방지
                    const parentBox = button.closest(".content-box");
                    parentBox.classList.remove("show");
                    parentBox.classList.remove("show1");
                    if (target === "online-course") {
                        document.getElementById("online-course").style.display = "none";
                    }
                    if (target === "content-management") {
                        document.getElementById("content-management").style.display = "none";
                    }
                    if (target === "member-management") {
                        document.getElementById("member-management").style.display = "none";
                    }
                });
            });
        });
    </script>

    <!-- 온라인 강의 -->
    <div id="online-course" style="display: none;" >
        <a href="/Course_delete" class="new-course-link" style="margin-left: 10px">삭제</a>
        <a href="/Course" class="new-course-link" style="margin-left: 10px">수정</a>
        <a href="/Course" class="new-course-link" style="margin-left: 10px">강의 신규등록</a>
        <a href="/Course_find" class="new-course-link" style="margin-left: 10px">조회</a><br><br>
        <div class="search-bar">
            <div class="search-bar-row">
                <label for="courseName">온라인강좌구분</label>
                <select name="courseName" id="courseName" style="margin-right: 20px;">
                    <option value="국어">국어</option>
                    <option value="영어">영어</option>
                    <option value="수학">수학</option>
                </select>
            </div>
            <div class="search-bar-row">
                <label for="courseSearch">온라인강좌명</label>
                <input type="text" id="courseSearch" placeholder="강좌번호 또는 강좌명을 검색해주세요...">
            </div>
            <div class="search-bar-row">
                <label for="courseStatus" style="margin-right: 105px;">강좌진행상태</label>
                <select name="courseStatus" id="courseStatus">
                    <option value="전체">전체</option>
                    <option value="준비중">준비중</option>
                    <option value="운영중">운영중</option>
                    <option value="종료">종료</option>
                </select>
            </div>
        </div>
        <div class="course-list">
            <h4>온라인강좌 <small>검색결과: ??건</small>
                <select style="margin-left: 2px;">
                    <option>5</option>
                    <option>10</option>
                    <option>50</option>
                    <option>100</option>
                    <option>500</option>
                </select>
            </h4>
            <div class="table-container">
                <table>
                    <tr>
                        <th><input type="checkbox" id="cboxAll" name="cboxAll" onclick="checkAll()"></th>
                        <th>강좌번호</th>
                        <th>강좌명</th>
                        <th>강좌소개</th>
                        <th>강좌 시작일</th>
                        <th>강좌 종료일</th>
                        <th>강좌 진행상태</th>
                    </tr>
                    <tr th:each="course : ${courses}">
                        <td><input type="checkbox" name="cbox"></td>
                        <td th:text="${course.courseSeq}">001</td>
                        <td><a href="#" th:text="${course.courseName}">강좌명</a></td>
                        <td th:text="${course.courseBrief}">HTML과 CSS로 페이지 스타일링하기</td>
                        <td th:text="${course.startDateTime}">2023-08-15</td>
                        <td th:text="${course.endDateTime}">2023-09-15</td>
                        <td th:text="${course.statusCode.name}">진행중</td>
                    </tr>
                </table>
                <script>
                    function checkAll() {
                        if ($("#cboxAll").is(':checked')) {
                            $("input[name=cbox]").prop("checked", true);
                        } else {
                            $("input[name=cbox]").prop("checked", false);
                        }
                    }
                </script>
                <div class="pagination">
                    <p style="text-align: center"> 1 / 2 / 3</p>
                </div>
            </div>
        </div>

        <div style="display: flex; justify-content: space-between; margin-top: 10px; position: relative;">
            <div style="width: 59%;">
                <div id="courseSessionsSection"
                     style="border: 1px solid #ccc; margin-top: 15px; width: 140px; text-align: center; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); border-radius: 5px; border-bottom-color: transparent;">
                    <h3>강좌차시정보</h3>
                </div>
                <div id="enrolleesSection"
                     style="border: 1px solid #ccc; width: 140px; text-align: center; position: absolute; top: 15px; left: 150px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); border-radius: 5px; border-bottom-color: transparent;">
                    <h3>수강대상자</h3>
                </div>
                <div id="courseSessionsContent"
                     style="border: 1px solid #ccc; height: 520px; width: 98%; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); border-radius: 5px; padding: 0px 10px 0px;">
                    <h3>강좌차시정보
                        <small>검색결과: ??건</small>
                        <select>
                            <option>5</option>
                            <option>30</option>
                            <option>50</option>
                            <option>100</option>
                            <option>500</option>
                        </select>
                    </h3>
                    <table>
                        <tr>
                            <th><input type="checkbox" id="cboxAll1" name="cboxAll1" onclick="checkAll1()"></th>
                            <th>차시순서</th>
                            <th>차시명</th>
                            <th>차시학습시간</th>
                        </tr>
                        <tbody id="courseChaptersTableBody">
                        <tr th:each="courseChapter : ${courseChapters}">
                                <td><input type="checkbox" name="cbox1"></td>
                                <td th:text="${courseChapter.chapterOrder}">001</td>
                                <td><a href="#" th:text="${courseChapter.chapterName}">예쁘게 꾸며보기</a></td>
                                <td th:text="${courseChapter.chapterBrief}">HTML과 CSS로 페이지 스타일링하기</td>
                        </tr>
                        </tbody>
                        <!-- Add more rows as needed -->
                    </table>
                    <script>
                        function checkAll1() {
                            if ($("#cboxAll1").is(':checked')) {
                                $("input[name=cbox1]").prop("checked", true);
                            } else {
                                $("input[name=cbox1]").prop("checked", false);
                            }
                        }
                    </script>
                </div>
                <div id="enrolleesContent"
                     style="border: 1px solid #ccc; height: 520px; width: 98%; display: none; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); border-radius: 5px; padding: 0px 10px 0px;">
                    <h3>수강대상자
                        <small>검색결과: ??건</small>
                        <select>
                            <option>5</option>
                            <option>30</option>
                            <option>50</option>
                            <option>100</option>
                            <option>500</option>
                        </select>
                    </h3>
                    <table>
                        <tr>
                            <th><input type="checkbox" id="cboxAll2" name="cboxAll2" onclick="checkAll2()"></th>
                            <th>회원구분</th>
                            <th>성명</th>
                            <th>성별</th>
                            <th>접속시간</th>
                            <th>접속종료시간</th>
                            <th>진도율</th>
                        </tr>
                        <tr>
                            <td><input type="checkbox" name="cbox2"></td>
                            <td>일반회원</td>
                            <td>조재건</td>
                            <td>남자</td>
                            <td>2014-08-07 11:20</td>
                            <td>2014-08-07 12:20</td>
                            <td>59%</td>
                        </tr>
                        <!-- Add more rows as needed -->
                    </table>
                    <script>
                        function checkAll2() {
                            if ($("#cboxAll2").is(':checked')) {
                                $("input[name=cbox2]").prop("checked", true);
                            } else {
                                $("input[name=cbox2]").prop("checked", false);
                            }
                        }
                    </script>
                </div>
            </div>
            <div style="max-width: 40%; width: 40%; margin-top: 79.5px; position: absolute; right: 5px;">
                <div style="border: 1px solid #ccc; height: 520px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); border-radius: 5px; padding: 3px 10px 0px;"
                     id="courseInfoBox">
                    <a href="#" class="new-course-link"
                       style="position: relative; right: 5px; top: 5px;" onclick="deleteSelectedChapters()">삭제</a>
                    <script>
                        function deleteSelectedChapters() {
                            const selectedChapters = [];
                            $("input[name=cbox1]:checked").each(function() {
                                // 선택된 courseChapter의 순서를 배열에 추가합니다.
                                selectedChapters.push($(this).closest("tr").find("[th\\:text=${courseChapter.chapterOrder}]").text());
                            });

                            $.ajax({
                                type: "POST",
                                url: "/CourseChapter_delete", // 실제 컨트롤러 URL로 변경
                                data: JSON.stringify(selectedChapters),
                                contentType: "application/json",
                                success: function(data) {
                                    if (data.success) {
                                        // 업데이트 로직 호출
                                        updateCourseChapters();
                                    } else {
                                        console.error("An error occurred during deletion.");
                                    }
                                },
                                error: function(xhr, status, error) {
                                    console.error("Error:", error);
                                }
                            });
                        }

                        function updateCourseChapters() {
                            // 선택한 courseChapter를 삭제하고 업데이트 로직 작성
                            // 예를 들어, 서버에서 최신 courseChapters를 다시 받아와서 업데이트하는 방식을 사용
                            // fetchAndShowCourseChapters(); // 예시로 데이터 업데이트 함수 호출
                        }
                    </script>
                    <a href="/CourseChapter_save" class="new-course-link"
                       style="position: relative; right: 10px; top: 5px;">수정</a>

                    <!-- 차시 신규등록 모달 -->
                    <button href="/CourseChapter_save" class="new-course-link" id="openContentRegistration"
                       style="position: relative; right: 15px; top: 5px;">차시 신규등록</button>
                    <!-- 차시 신규등록 모달 오버레이 -->
                    <div id="modalOverlay" class="modal-overlay">
                        <div class="modal-content">
                            <span class="close-button1" id="closeModal">&times;</span>
                            <h2>강의 차시 등록</h2>
                            <form action="/CourseChapter_save" method="post">
                                강좌목록: <select name="courseDTO.courseSeq">
                                <option th:each="course : ${courses}" th:value="${course.courseSeq}" th:text="${course.courseName}"></option>
                            </select><br>
                                차시순서: <input type="number" name="chapterOrder" th:value="${i}"><br>
                                쳅터제목: <input type="text" name="chapterName"><br>
                                <!--컨텐츠번호: <input type="text" name="content">
                                보조자료: <input type="file" name="supplementaryFile">-->
                                챕터설명: <input type="text" name="chapterBrief"><br>
                                <input type="submit" value="등록">
                            </form>
                        </div>
                    </div>
                    <script th:inline="javascript">
                        /*<![CDATA[*/
                        const i = /*[[${i}]]*/ 0;
                        /*]]>*/
                    </script>
                    <!-- 강의 차시등록 모달 스크립트 -->
                    <script>
                        // 모달을 위한 JavaScript
                        const openContentRegistration = document.getElementById("openContentRegistration");
                        const modalOverlay = document.getElementById("modalOverlay");
                        const closeModal = document.getElementById("closeModal");

                        // 전역 범위에서 chapterOrderValue 변수 선언
                        let chapterOrderValue = 0;

                        //모달이 열릴때
                        openContentRegistration.addEventListener("click", () => {
                            modalOverlay.style.display = "block";
                            const chapterNameInput = document.querySelector("input[name='chapterName']");
                            const chapterBriefInput = document.querySelector("input[name='chapterBrief']");
                            chapterNameInput.value="";
                            chapterBriefInput.value="";
                        });

                        //모달이 닫힐때
                        closeModal.addEventListener("click", () => {
                            modalOverlay.style.display = "none";
                            const chapterNameInput = document.querySelector("input[name='chapterName']");
                            const chapterBriefInput = document.querySelector("input[name='chapterBrief']");
                            chapterNameInput.value="";
                            chapterBriefInput.value="";
                        });

                        // 모달 콘텐츠 바깥을 클릭하면 모달 닫기
                        window.addEventListener("click", (event) => {
                            if (event.target === modalOverlay) {
                                modalOverlay.style.display = "none";
                                const chapterNameInput = document.querySelector("input[name='chapterName']");
                                const chapterBriefInput = document.querySelector("input[name='chapterBrief']");
                                chapterNameInput.value="";
                                chapterBriefInput.value="";
                            }
                        });

                        const form = document.querySelector("form"); // 여러 form 중 하나를 선택
                        form.addEventListener("submit", async (event) => {
                            event.preventDefault(); // 폼 제출 기본 동작 중지

                            const formData = new FormData(form);
                            const response = await fetch("/CourseChapter_save", {
                                method: "POST",
                                body: formData,
                            });
                            if (response.ok) {
                                modalOverlay.style.display = "none"; // 모달 닫기
                                // 응답 데이터를 JSON 형태로 파싱
                                const responseData = await response.json();
                                const newRow = document.createElement("tr");
                                        newRow.innerHTML = `
                                            <td><input type="checkbox" name="cbox1"></td>
                                            <td>${responseData.chapterOrder}</td>
                                            <td><a href="#">${responseData.chapterName}</a></td>
                                            <td>${responseData.chapterBrief}</td>
                                        `;
                                chapterOrderValue = responseData.chapterOrder + 1; // chapterOrderValue 업데이트
                                const chapterOrderInput = document.querySelector("input[name='chapterOrder']");
                                chapterOrderInput.value = chapterOrderValue;
                                // courseChaptersTableBody의 자식으로 newRow 추가
                                courseChaptersTableBody.appendChild(newRow);
                            } else {
                            }
                        });
                    </script>
                    <table style="margin-top: 64px;">
                        <tr>
                            <td style="width: 30%;">차시 번호</td>
                            <td>001</td>
                        </tr>
                        <tr>
                            <td style="width: 30%;">강좌</td>
                            <td>001</td>
                        </tr>
                        <tr>
                            <td style="width: 30%;">차시순서</td>
                            <td colspan="3">1</td>
                        </tr>
                        <tr>
                            <td style="width: 30%;">차시 제목</td>
                            <td colspan="3">국어수업1</td>
                        </tr>
                        <tr>
                            <td style="width: 30%;">차시 학습시간</td>
                            <td colspan="3">1시간 30분 5초</td>
                        </tr>
                        <tr>
                            <td style="width: 30%;">썸네일파일</td>
                            <td colspan="3">이러쿵저러쿵.pdf</td>
                        </tr>
                        <tr>
                            <td style="width: 30%;">차시강의 콘탠츠 번호</td>
                            <td colspan="3">#A01i013</td>
                        </tr>
                        <tr>
                            <td style="width: 30%;">보조자료 파일</td>
                            <td colspan="3">어쩌구저쩌구.pdf</td>
                        </tr>
                        <tr>
                            <td style="width: 30%;">차시내용 요약</td>
                            <td colspan="3" height="100px;">재미없는 국어 수업시간</td>
                        </tr>
                        <!-- Add more rows as needed -->
                    </table>
                </div>
            </div>
            <div style="max-width: 40%; width: 40%; margin-top: 79.5px; position: absolute; right: 5px;">
                <div style="border: 1px solid #ccc; height: 520px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); border-radius: 5px; padding: 3px 10px 0px; display: none;"
                     id="userInfoBox">
                    <a href="/CourseStudent_delete" class="new-course-link"
                       style="position: relative; right: 5px; top: 5px;">삭제</a>
                    <a href="/CourseStudent_save" class="new-course-link"
                       style="position: relative; right: 10px; top: 5px;">수정</a>

                    <!-- 수강생 신규등록 모달 -->
                    <button id="openStudentRegistrationModal" class="new-course-link" style="position: relative; right: 15px; top: 5px;">
                        수강생 신규등록
                    </button>
                    <!-- 수강생 신규등록 모달-->
                    <div id="studentRegistrationModalOverlay" class="modal-overlay">
                        <div class="modal-content">
                            <span class="close-button1" id="closeStudentRegistrationModal">&times;</span>
                            <h2>수강대상자등록</h2>
                            <a href="#" onclick="fetchAndShowStudentData()">조회</a>
                            <form action="/CourseStudent_save" method="post" id="courseStudentForm">
                                <input type="hidden" name="courseSeq" value="1">
                                <table>
                                    <tr>
                                        <th><input type="checkbox" id="cboxAll3" name="cboxAll3" onclick="checkAll3()"></th>
                                        <th>회원구분</th>
                                        <th>성명</th>
                                        <th>이메일</th>
                                        <th>접속시간</th>
                                        <th>접속종료시간</th>
                                        <th>진도율</th>
                                    </tr>
                                    <tbody id="studentTableBody">
                                    <tr th:each="member, status : ${members}">
                                        <td>
                                            <input type="checkbox" name="cbox3" th:data-index="${status.index}" th:value="${member.memberSeq}" onclick="toggleCheckbox(this)">
                                        </td>
                                        <td th:text="${member.memberDivision.code}"></td>
                                        <td th:text="${member.nameKor}"></td>
                                        <td th:text="${member.email}"></td>
                                        <td>1</td>
                                        <td>2</td>
                                        <td>3</td>
                                    </tr>
                                    </tbody>
                                </table>
                                <input type="submit" id="submitRegistrationButton" value="등록">
                            </form>
                        </div>
                    </div>
                    <script>
                        function checkAll3() {
                            if ($("#cboxAll3").is(':checked')) {
                                $("input[name=cbox3]").prop("checked", true);
                            } else {
                                $("input[name=cbox3]").prop("checked", false);
                            }
                        }
                        function toggleCheckbox(checkbox) {
                            var hiddenInput = $(checkbox).siblings('.memberSeq');
                            if (checkbox.checked) {
                                hiddenInput.prop('disabled', false);
                            } else {
                                hiddenInput.prop('disabled', true);
                            }
                        }
                    </script>
                    <script>
                        const openStudentRegistrationModal = document.getElementById("openStudentRegistrationModal");
                        const studentRegistrationModalOverlay = document.getElementById("studentRegistrationModalOverlay");
                        const closeStudentRegistrationModal = document.getElementById("closeStudentRegistrationModal");

                        function clearStudentTable() {
                            const tableBody = document.querySelector("#studentTableBody");
                            while (tableBody.firstChild) {
                                tableBody.removeChild(tableBody.firstChild);
                            }
                        }
                        function fetchAndShowStudentData() {
                            const tableBody = document.querySelector("#studentTableBody");
                            // 이전 데이터 삭제
                            while (tableBody.firstChild) {
                                tableBody.removeChild(tableBody.firstChild);
                            }
                            fetch("/Member_findAll") // 컨트롤러 URL로 수정
                                .then(response => response.json())
                                .then(data => {
                                    data.forEach(member => {
                                        const newRow = document.createElement("tr");
                                        newRow.innerHTML = `
                        <td>
                            <input type="checkbox" name="cbox3" value="${member.memberSeq}" onclick="toggleCheckbox(this)">
                        </td>
                        <td>${member.memberDivision.code}</td>
                        <td>${member.nameKor}</td>
                        <td>${member.email}</td>
                        <td>1</td>
                        <td>2</td>
                        <td>3</td>
                    `;
                                        tableBody.appendChild(newRow);
                                    });
                                })
                                .catch(error => console.error("An error occurred:", error));
                        }
                        openStudentRegistrationModal.addEventListener("click", () => {
                            studentRegistrationModalOverlay.style.display = "block";
                            clearStudentTable(); // 테이블 내용 지우기
                            form.reset();
                        });

                        closeStudentRegistrationModal.addEventListener("click", () => {
                            studentRegistrationModalOverlay.style.display = "none";
                            clearStudentTable(); // 테이블 내용 지우기
                            form.reset();
                        });

                        window.addEventListener("click", (event) => {
                            if (event.target === studentRegistrationModalOverlay) {
                                studentRegistrationModalOverlay.style.display = "none";
                                clearStudentTable(); // 테이블 내용 지우기
                                form.reset();
                            }
                        });

                        document.getElementById("submitRegistrationButton").addEventListener("click", (event) => {
                            event.preventDefault(); // 폼 기본 동작 막기
                            submitForm();
                        });

                        function submitForm() {
                            const form = document.getElementById("courseStudentForm");
                            const formData = new FormData(form);

                            fetch("/CourseStudent_save", {
                                method: "POST",
                                body: formData
                            })
                                .then(response => response.text())
                                .then(data => {
                                    if (data === "Success") {
                                        closeStudentRegistrationModal.click(); // 모달 닫기
                                        updatePageData(); // 페이지 일부 업데이트
                                    } else {
                                        console.error("An error occurred during data processing.");
                                    }
                                })
                                .catch(error => console.error("An error occurred:", error));
                        }
                        function updatePageData() {
                        }

                    </script>

                    <table style="margin-top: 64px; width: 100%;">
                        <tr>
                            <td>회원번호</td>
                            <td colspan="2">1</td>
                            <td rowspan="4" colspan="3"><img src="" alt="프로필사진"></td>
                        </tr>
                        <tr>
                            <td>회원구분</td>
                            <td colspan="2">일반회원</td>
                        </tr>
                        <tr>
                            <td>성명</td>
                            <td colspan="2">조재건</td>
                        </tr>
                        <tr>
                            <td>성별</td>
                            <td colspan="2">남자</td>
                        </tr>
                        <tr>
                            <td>이메일</td>
                            <td>jaekun12345@naver.com</td>
                            <td>생년월일</td>
                            <td>2002-01-01</td>
                        </tr>
                        <tr>
                            <td>접속시간</td>
                            <td colspan="3">2023-08-07 11:50</td>
                        </tr>
                        <tr>
                            <td>접속종료시간</td>
                            <td colspan="3">2023-08-07 11:50</td>
                        </tr>
                        <tr>
                            <td>진도율</td>
                            <td colspan="3">50%</td>
                        </tr>
                        <tr>
                            <td>특이사항</td>
                            <td colspan="3" style="height: 100px;">어쩌구 저쩌구</td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
        <br><br><br><br><br><br><br><br><br>
    </div>

    <!-- 강의 컨탠트 관리 -->
    <div id="content-management" style="display: none;">
        <br><br>
        <button>강의컨텐트관리</button>
    </div>

    <!-- 회원 관리 박스 -->
    <div id="member-management" style="display: none;">
        <br><br>
        <a href="#">회원 관리 박스</a>
    </div>
</div>
</body>
<script>
    const courseSessionsSection = document.getElementById("courseSessionsSection");
    const enrolleesSection = document.getElementById("enrolleesSection");
    const courseSessionsContent = document.getElementById("courseSessionsContent");
    const enrolleesContent = document.getElementById("enrolleesContent");

    courseSessionsSection.addEventListener("click", () => {
        enrolleesContent.style.display = "none";
        courseSessionsContent.style.display = "block";
        document.getElementById("courseInfoBox").style.display = "block";
        document.getElementById("userInfoBox").style.display = "none";
    });

    enrolleesSection.addEventListener("click", () => {
        courseSessionsContent.style.display = "none";
        enrolleesContent.style.display = "block";
        document.getElementById("courseInfoBox").style.display = "none";
        document.getElementById("userInfoBox").style.display = "block";
    });
</script>
</html>
